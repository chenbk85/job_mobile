<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_32) on Tue Nov 27 09:40:41 CET 2012 -->
<TITLE>
MerkleTree (apache-cassandra API)
</TITLE>

<META NAME="date" CONTENT="2012-11-27">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="MerkleTree (apache-cassandra API)";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/MerkleTree.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../org/apache/cassandra/utils/MergeIterator.Reducer.html" title="class in org.apache.cassandra.utils"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../org/apache/cassandra/utils/MerkleTree.MerkleTreeSerializer.html" title="class in org.apache.cassandra.utils"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?org/apache/cassandra/utils/MerkleTree.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="MerkleTree.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;<A HREF="#nested_class_summary">NESTED</A>&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
org.apache.cassandra.utils</FONT>
<BR>
Class MerkleTree</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../../resources/inherit.gif" ALT="extended by "><B>org.apache.cassandra.utils.MerkleTree</B>
</PRE>
<DL>
<DT><B>All Implemented Interfaces:</B> <DD>java.io.Serializable</DD>
</DL>
<HR>
<DL>
<DT><PRE>public class <B>MerkleTree</B><DT>extends java.lang.Object<DT>implements java.io.Serializable</DL>
</PRE>

<P>
A MerkleTree implemented as a binary tree.

 A MerkleTree is a full binary tree that represents a perfect binary tree of
 depth 'hashdepth'. In a perfect binary tree, each leaf contains a
 sequentially hashed range, and each inner node contains the binary hash of
 its two children. In the MerkleTree, many ranges will not be split to the
 full depth of the perfect binary tree: the leaves of this tree are Leaf objects,
 which contain the computed values of the nodes that would be below them if
 the tree were perfect.

 The hash values of the inner nodes of the MerkleTree are calculated lazily based
 on their children when the hash of a range is requested with hash(range).

 Inputs passed to TreeRange.validate should be calculated using a very secure hash,
 because all hashing internal to the tree is accomplished using XOR.

 If two MerkleTrees have the same hashdepth, they represent a perfect tree
 of the same depth, and can always be compared, regardless of size or splits.
<P>

<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../serialized-form.html#org.apache.cassandra.utils.MerkleTree">Serialized Form</A></DL>
<HR>

<P>
<!-- ======== NESTED CLASS SUMMARY ======== -->

<A NAME="nested_class_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Nested Class Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;class</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/cassandra/utils/MerkleTree.MerkleTreeSerializer.html" title="class in org.apache.cassandra.utils">MerkleTree.MerkleTreeSerializer</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;class</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/cassandra/utils/MerkleTree.RowHash.html" title="class in org.apache.cassandra.utils">MerkleTree.RowHash</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Hash value representing a row, to be used to pass hashes to the MerkleTree.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;class</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/cassandra/utils/MerkleTree.TreeRange.html" title="class in org.apache.cassandra.utils">MerkleTree.TreeRange</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The public interface to a range in the tree.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;class</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/cassandra/utils/MerkleTree.TreeRangeIterator.html" title="class in org.apache.cassandra.utils">MerkleTree.TreeRangeIterator</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the leaf (range) of a given tree in increasing order.</TD>
</TR>
</TABLE>
&nbsp;<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/cassandra/utils/MerkleTree.html#CONSISTENT">CONSISTENT</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../org/apache/cassandra/dht/Range.html" title="class in org.apache.cassandra.dht">Range</A>&lt;<A HREF="../../../../org/apache/cassandra/dht/Token.html" title="class in org.apache.cassandra.dht">Token</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/cassandra/utils/MerkleTree.html#fullRange">fullRange</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The top level range that this MerkleTree covers.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/cassandra/utils/MerkleTree.html#FULLY_INCONSISTENT">FULLY_INCONSISTENT</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;byte</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/cassandra/utils/MerkleTree.html#hashdepth">hashdepth</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/cassandra/utils/MerkleTree.html#PARTIALLY_INCONSISTENT">PARTIALLY_INCONSISTENT</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;byte</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/cassandra/utils/MerkleTree.html#RECOMMENDED_DEPTH">RECOMMENDED_DEPTH</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;<A HREF="../../../../org/apache/cassandra/utils/MerkleTree.MerkleTreeSerializer.html" title="class in org.apache.cassandra.utils">MerkleTree.MerkleTreeSerializer</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/cassandra/utils/MerkleTree.html#serializer">serializer</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../org/apache/cassandra/utils/MerkleTree.html#MerkleTree(org.apache.cassandra.dht.IPartitioner, org.apache.cassandra.dht.Range, byte, long)">MerkleTree</A></B>(<A HREF="../../../../org/apache/cassandra/dht/IPartitioner.html" title="interface in org.apache.cassandra.dht">IPartitioner</A>&nbsp;partitioner,
           <A HREF="../../../../org/apache/cassandra/dht/Range.html" title="class in org.apache.cassandra.dht">Range</A>&lt;<A HREF="../../../../org/apache/cassandra/dht/Token.html" title="class in org.apache.cassandra.dht">Token</A>&gt;&nbsp;range,
           byte&nbsp;hashdepth,
           long&nbsp;maxsize)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;java.util.List&lt;<A HREF="../../../../org/apache/cassandra/utils/MerkleTree.TreeRange.html" title="class in org.apache.cassandra.utils">MerkleTree.TreeRange</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/cassandra/utils/MerkleTree.html#difference(org.apache.cassandra.utils.MerkleTree, org.apache.cassandra.utils.MerkleTree)">difference</A></B>(<A HREF="../../../../org/apache/cassandra/utils/MerkleTree.html" title="class in org.apache.cassandra.utils">MerkleTree</A>&nbsp;ltree,
           <A HREF="../../../../org/apache/cassandra/utils/MerkleTree.html" title="class in org.apache.cassandra.utils">MerkleTree</A>&nbsp;rtree)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../org/apache/cassandra/utils/MerkleTree.TreeRange.html" title="class in org.apache.cassandra.utils">MerkleTree.TreeRange</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/cassandra/utils/MerkleTree.html#get(org.apache.cassandra.dht.Token)">get</A></B>(<A HREF="../../../../org/apache/cassandra/dht/Token.html" title="class in org.apache.cassandra.dht">Token</A>&nbsp;t)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;For testing purposes.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;byte[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/cassandra/utils/MerkleTree.html#hash(org.apache.cassandra.dht.Range)">hash</A></B>(<A HREF="../../../../org/apache/cassandra/dht/Range.html" title="class in org.apache.cassandra.dht">Range</A>&lt;<A HREF="../../../../org/apache/cassandra/dht/Token.html" title="class in org.apache.cassandra.dht">Token</A>&gt;&nbsp;range)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Hash the given range in the tree.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/cassandra/utils/MerkleTree.html#init()">init</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Initializes this tree by splitting it until hashdepth is reached,
 or until an additional level of splits would violate maxsize.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/cassandra/utils/MerkleTree.html#invalidate(org.apache.cassandra.dht.Token)">invalidate</A></B>(<A HREF="../../../../org/apache/cassandra/dht/Token.html" title="class in org.apache.cassandra.dht">Token</A>&nbsp;t)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Invalidates the ranges containing the given token.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../org/apache/cassandra/utils/MerkleTree.TreeRangeIterator.html" title="class in org.apache.cassandra.utils">MerkleTree.TreeRangeIterator</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/cassandra/utils/MerkleTree.html#invalids()">invalids</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns a lazy iterator of invalid TreeRanges that need to be filled
 in order to make the given Range valid.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/cassandra/utils/MerkleTree.html#maxsize()">maxsize</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/cassandra/utils/MerkleTree.html#maxsize(long)">maxsize</A></B>(long&nbsp;maxsize)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../org/apache/cassandra/dht/IPartitioner.html" title="interface in org.apache.cassandra.dht">IPartitioner</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/cassandra/utils/MerkleTree.html#partitioner()">partitioner</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/cassandra/utils/MerkleTree.html#partitioner(org.apache.cassandra.dht.IPartitioner)">partitioner</A></B>(<A HREF="../../../../org/apache/cassandra/dht/IPartitioner.html" title="interface in org.apache.cassandra.dht">IPartitioner</A>&nbsp;partitioner)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TODO: Find another way to use the local partitioner after serialization.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/cassandra/utils/MerkleTree.html#size()">size</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The number of distinct ranges contained in this tree.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/cassandra/utils/MerkleTree.html#split(org.apache.cassandra.dht.Token)">split</A></B>(<A HREF="../../../../org/apache/cassandra/dht/Token.html" title="class in org.apache.cassandra.dht">Token</A>&nbsp;t)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Splits the range containing the given token, if no tree limits would be
 violated.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/cassandra/utils/MerkleTree.html#toString()">toString</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Field Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="serializer"><!-- --></A><H3>
serializer</H3>
<PRE>
public static final <A HREF="../../../../org/apache/cassandra/utils/MerkleTree.MerkleTreeSerializer.html" title="class in org.apache.cassandra.utils">MerkleTree.MerkleTreeSerializer</A> <B>serializer</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="RECOMMENDED_DEPTH"><!-- --></A><H3>
RECOMMENDED_DEPTH</H3>
<PRE>
public static final byte <B>RECOMMENDED_DEPTH</B></PRE>
<DL>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../constant-values.html#org.apache.cassandra.utils.MerkleTree.RECOMMENDED_DEPTH">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="CONSISTENT"><!-- --></A><H3>
CONSISTENT</H3>
<PRE>
public static final int <B>CONSISTENT</B></PRE>
<DL>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../constant-values.html#org.apache.cassandra.utils.MerkleTree.CONSISTENT">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="FULLY_INCONSISTENT"><!-- --></A><H3>
FULLY_INCONSISTENT</H3>
<PRE>
public static final int <B>FULLY_INCONSISTENT</B></PRE>
<DL>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../constant-values.html#org.apache.cassandra.utils.MerkleTree.FULLY_INCONSISTENT">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="PARTIALLY_INCONSISTENT"><!-- --></A><H3>
PARTIALLY_INCONSISTENT</H3>
<PRE>
public static final int <B>PARTIALLY_INCONSISTENT</B></PRE>
<DL>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../constant-values.html#org.apache.cassandra.utils.MerkleTree.PARTIALLY_INCONSISTENT">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="hashdepth"><!-- --></A><H3>
hashdepth</H3>
<PRE>
public final byte <B>hashdepth</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="fullRange"><!-- --></A><H3>
fullRange</H3>
<PRE>
public transient <A HREF="../../../../org/apache/cassandra/dht/Range.html" title="class in org.apache.cassandra.dht">Range</A>&lt;<A HREF="../../../../org/apache/cassandra/dht/Token.html" title="class in org.apache.cassandra.dht">Token</A>&gt; <B>fullRange</B></PRE>
<DL>
<DD>The top level range that this MerkleTree covers.
 In a perfect world, this should be final and *not* transient. However
 this would break serialization with version &gte; 0.7 because it uses
 java serialization. We are moreover always shipping the fullRange will
 the request so we can add it back post-deserialization (as for the
 partitioner).
<P>
<DL>
</DL>
</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="MerkleTree(org.apache.cassandra.dht.IPartitioner, org.apache.cassandra.dht.Range, byte, long)"><!-- --></A><H3>
MerkleTree</H3>
<PRE>
public <B>MerkleTree</B>(<A HREF="../../../../org/apache/cassandra/dht/IPartitioner.html" title="interface in org.apache.cassandra.dht">IPartitioner</A>&nbsp;partitioner,
                  <A HREF="../../../../org/apache/cassandra/dht/Range.html" title="class in org.apache.cassandra.dht">Range</A>&lt;<A HREF="../../../../org/apache/cassandra/dht/Token.html" title="class in org.apache.cassandra.dht">Token</A>&gt;&nbsp;range,
                  byte&nbsp;hashdepth,
                  long&nbsp;maxsize)</PRE>
<DL>
<DL>
<DT><B>Parameters:</B><DD><CODE>partitioner</CODE> - The partitioner in use.<DD><CODE>range</CODE> - the range this tree covers<DD><CODE>hashdepth</CODE> - The maximum depth of the tree. 100/(2^depth) is the %
        of the key space covered by each subrange of a fully populated tree.<DD><CODE>maxsize</CODE> - The maximum number of subranges in the tree.</DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="init()"><!-- --></A><H3>
init</H3>
<PRE>
public void <B>init</B>()</PRE>
<DL>
<DD>Initializes this tree by splitting it until hashdepth is reached,
 or until an additional level of splits would violate maxsize.

 NB: Replaces all nodes in the tree.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="partitioner()"><!-- --></A><H3>
partitioner</H3>
<PRE>
public <A HREF="../../../../org/apache/cassandra/dht/IPartitioner.html" title="interface in org.apache.cassandra.dht">IPartitioner</A> <B>partitioner</B>()</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="size()"><!-- --></A><H3>
size</H3>
<PRE>
public long <B>size</B>()</PRE>
<DL>
<DD>The number of distinct ranges contained in this tree. This is a reasonable
 measure of the memory usage of the tree (assuming 'this.order' is significant).
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="maxsize()"><!-- --></A><H3>
maxsize</H3>
<PRE>
public long <B>maxsize</B>()</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="maxsize(long)"><!-- --></A><H3>
maxsize</H3>
<PRE>
public void <B>maxsize</B>(long&nbsp;maxsize)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="partitioner(org.apache.cassandra.dht.IPartitioner)"><!-- --></A><H3>
partitioner</H3>
<PRE>
public void <B>partitioner</B>(<A HREF="../../../../org/apache/cassandra/dht/IPartitioner.html" title="interface in org.apache.cassandra.dht">IPartitioner</A>&nbsp;partitioner)</PRE>
<DL>
<DD>TODO: Find another way to use the local partitioner after serialization.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="difference(org.apache.cassandra.utils.MerkleTree, org.apache.cassandra.utils.MerkleTree)"><!-- --></A><H3>
difference</H3>
<PRE>
public static java.util.List&lt;<A HREF="../../../../org/apache/cassandra/utils/MerkleTree.TreeRange.html" title="class in org.apache.cassandra.utils">MerkleTree.TreeRange</A>&gt; <B>difference</B>(<A HREF="../../../../org/apache/cassandra/utils/MerkleTree.html" title="class in org.apache.cassandra.utils">MerkleTree</A>&nbsp;ltree,
                                                              <A HREF="../../../../org/apache/cassandra/utils/MerkleTree.html" title="class in org.apache.cassandra.utils">MerkleTree</A>&nbsp;rtree)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>ltree</CODE> - First tree.<DD><CODE>rtree</CODE> - Second tree.
<DT><B>Returns:</B><DD>A list of the largest contiguous ranges where the given trees disagree.</DL>
</DD>
</DL>
<HR>

<A NAME="get(org.apache.cassandra.dht.Token)"><!-- --></A><H3>
get</H3>
<PRE>
public <A HREF="../../../../org/apache/cassandra/utils/MerkleTree.TreeRange.html" title="class in org.apache.cassandra.utils">MerkleTree.TreeRange</A> <B>get</B>(<A HREF="../../../../org/apache/cassandra/dht/Token.html" title="class in org.apache.cassandra.dht">Token</A>&nbsp;t)</PRE>
<DL>
<DD>For testing purposes.
 Gets the smallest range containing the token.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="invalidate(org.apache.cassandra.dht.Token)"><!-- --></A><H3>
invalidate</H3>
<PRE>
public void <B>invalidate</B>(<A HREF="../../../../org/apache/cassandra/dht/Token.html" title="class in org.apache.cassandra.dht">Token</A>&nbsp;t)</PRE>
<DL>
<DD>Invalidates the ranges containing the given token.
 Useful for testing.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="hash(org.apache.cassandra.dht.Range)"><!-- --></A><H3>
hash</H3>
<PRE>
public byte[] <B>hash</B>(<A HREF="../../../../org/apache/cassandra/dht/Range.html" title="class in org.apache.cassandra.dht">Range</A>&lt;<A HREF="../../../../org/apache/cassandra/dht/Token.html" title="class in org.apache.cassandra.dht">Token</A>&gt;&nbsp;range)</PRE>
<DL>
<DD>Hash the given range in the tree. The range must have been generated
 with recursive applications of partitioner.midpoint().

 NB: Currently does not support wrapping ranges that do not end with
 partitioner.getMinimumToken().
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>Null if any subrange of the range is invalid, or if the exact
         range cannot be calculated using this tree.</DL>
</DD>
</DL>
<HR>

<A NAME="split(org.apache.cassandra.dht.Token)"><!-- --></A><H3>
split</H3>
<PRE>
public boolean <B>split</B>(<A HREF="../../../../org/apache/cassandra/dht/Token.html" title="class in org.apache.cassandra.dht">Token</A>&nbsp;t)</PRE>
<DL>
<DD>Splits the range containing the given token, if no tree limits would be
 violated. If the range would be split to a depth below hashdepth, or if
 the tree already contains maxsize subranges, this operation will fail.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>True if the range was successfully split.</DL>
</DD>
</DL>
<HR>

<A NAME="invalids()"><!-- --></A><H3>
invalids</H3>
<PRE>
public <A HREF="../../../../org/apache/cassandra/utils/MerkleTree.TreeRangeIterator.html" title="class in org.apache.cassandra.utils">MerkleTree.TreeRangeIterator</A> <B>invalids</B>()</PRE>
<DL>
<DD>Returns a lazy iterator of invalid TreeRanges that need to be filled
 in order to make the given Range valid.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="toString()"><!-- --></A><H3>
toString</H3>
<PRE>
public java.lang.String <B>toString</B>()</PRE>
<DL>
<DD><DL>
<DT><B>Overrides:</B><DD><CODE>toString</CODE> in class <CODE>java.lang.Object</CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/MerkleTree.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../org/apache/cassandra/utils/MergeIterator.Reducer.html" title="class in org.apache.cassandra.utils"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../org/apache/cassandra/utils/MerkleTree.MerkleTreeSerializer.html" title="class in org.apache.cassandra.utils"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?org/apache/cassandra/utils/MerkleTree.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="MerkleTree.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;<A HREF="#nested_class_summary">NESTED</A>&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>
Copyright &copy; 2012 The Apache Software Foundation
</BODY>
</HTML>
